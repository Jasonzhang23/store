<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MenFashion Store - ç”·å£«æœè£…ç”µå•†</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/pages.css">
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h1>MenFashion</h1>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link active">é¦–é¡µ</a>
                <a href="category.html" class="nav-link">å•†å“åˆ†ç±»</a>
                <a href="category.html?category=1" class="nav-link">Tæ¤</a>
                <a href="category.html?category=2" class="nav-link">è¡¬è¡«</a>
                <a href="category.html?category=3" class="nav-link">è£¤å­</a>
                <a href="category.html?category=4" class="nav-link">å¤–å¥—</a>
                <a href="category.html?category=5" class="nav-link">é‹å­</a>
            </div>
            <div class="nav-actions">
                <a href="favorites.html" class="nav-icon" id="favorites-icon">
                    <span class="icon">â¤ï¸</span>
                    <span class="badge" id="favorites-count">0</span>
                </a>
                <a href="cart.html" class="nav-icon" id="cart-icon">
                    <span class="icon">ğŸ›’</span>
                    <span class="badge" id="cart-count">0</span>
                </a>
                <div class="user-menu" id="user-menu">
                    <button class="user-btn" id="user-btn">ç™»å½•</button>
                    <div class="dropdown-menu" id="dropdown-menu">
                        <a href="profile.html">ä¸ªäººä¸­å¿ƒ</a>
                        <a href="history.html">æµè§ˆå†å²</a>
                        <a href="#" id="logout-btn">é€€å‡ºç™»å½•</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹ -->
    <main class="main-content">
        <!-- è½®æ’­å›¾ -->
        <section class="hero-section">
            <div class="carousel" id="carousel">
                <div class="carousel-container">
                    <!-- è½®æ’­å›¾å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                <button class="carousel-btn prev" id="prev-btn">â€¹</button>
                <button class="carousel-btn next" id="next-btn">â€º</button>
                <div class="carousel-dots" id="carousel-dots">
                    <!-- è½®æ’­å›¾æŒ‡ç¤ºå™¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </section>

        <!-- å•†å“åˆ†ç±» -->
        <section class="categories-section">
            <div class="container">
                <h2 class="section-title">å•†å“åˆ†ç±»</h2>
                <div class="categories-grid" id="categories-grid">
                    <!-- åˆ†ç±»å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </section>

        <!-- çƒ­é—¨å•†å“ -->
        <section class="products-section">
            <div class="container">
                <h2 class="section-title">çƒ­é—¨å•†å“</h2>
                <div class="products-grid" id="hot-products">
                    <!-- å•†å“å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </section>

        <!-- æ–°å“ä¸Šå¸‚ -->
        <section class="products-section">
            <div class="container">
                <h2 class="section-title">æ–°å“ä¸Šå¸‚</h2>
                <div class="products-grid" id="new-products">
                    <!-- å•†å“å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </section>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>å…³äºæˆ‘ä»¬</h3>
                    <p>MenFashion Storeè‡´åŠ›äºä¸ºç”·å£«æä¾›ä¼˜è´¨çš„æœè£…é€‰æ‹©ï¼Œè®©æ¯ä¸€ä½é¡¾å®¢éƒ½èƒ½æ‰¾åˆ°é€‚åˆè‡ªå·±çš„é£æ ¼ã€‚</p>
                </div>
                <div class="footer-section">
                    <h3>å®¢æˆ·æœåŠ¡</h3>
                    <ul>
                        <li><a href="#">è´­ç‰©æŒ‡å—</a></li>
                        <li><a href="#">é…é€æ–¹å¼</a></li>
                        <li><a href="#">é€€æ¢è´§æ”¿ç­–</a></li>
                        <li><a href="#">è”ç³»å®¢æœ</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>å…³æ³¨æˆ‘ä»¬</h3>
                    <div class="social-links">
                        <a href="#" class="social-link">å¾®ä¿¡</a>
                        <a href="#" class="social-link">å¾®åš</a>
                        <a href="#" class="social-link">æŠ–éŸ³</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 MenFashion Store. ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</p>
            </div>
        </div>
    </footer>

    <!-- ç™»å½•æ¨¡æ€æ¡† -->
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <span class="close" id="close-login">&times;</span>
            <h2>ç”¨æˆ·ç™»å½•</h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email">é‚®ç®±</label>
                    <input type="email" id="login-email" required>
                </div>
                <div class="form-group">
                    <label for="login-password">å¯†ç </label>
                    <input type="password" id="login-password" required>
                </div>
                <button type="submit" class="btn btn-primary">ç™»å½•</button>
                <p class="form-footer">
                    è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ<a href="#" id="show-register">ç«‹å³æ³¨å†Œ</a>
                </p>
            </form>
        </div>
    </div>

    <!-- æ³¨å†Œæ¨¡æ€æ¡† -->
    <div class="modal" id="register-modal">
        <div class="modal-content">
            <span class="close" id="close-register">&times;</span>
            <h2>ç”¨æˆ·æ³¨å†Œ</h2>
            <form id="register-form">
                <div class="form-group">
                    <label for="register-username">ç”¨æˆ·å</label>
                    <input type="text" id="register-username" required>
                </div>
                <div class="form-group">
                    <label for="register-email">é‚®ç®±</label>
                    <input type="email" id="register-email" required>
                </div>
                <div class="form-group">
                    <label for="register-password">å¯†ç </label>
                    <input type="password" id="register-password" required>
                </div>
                <div class="form-group">
                    <label for="register-confirm-password">ç¡®è®¤å¯†ç </label>
                    <input type="password" id="register-confirm-password" required>
                </div>
                <button type="submit" class="btn btn-primary">æ³¨å†Œ</button>
                <p class="form-footer">
                    å·²æœ‰è´¦å·ï¼Ÿ<a href="#" id="show-login">ç«‹å³ç™»å½•</a>
                </p>
            </form>
        </div>
    </div>

    <!-- åŠ è½½JavaScriptæ–‡ä»¶ -->
    <script src="js/data.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/app.js"></script>
    <script>
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–åº”ç”¨
            App.init();
            
            // ç»‘å®šäº‹ä»¶
            bindEvents();
        });

        // ç»‘å®šé¡µé¢äº‹ä»¶
        function bindEvents() {
            // ç™»å½•æ³¨å†Œæ¨¡æ€æ¡†äº‹ä»¶
            const loginModal = document.getElementById('login-modal');
            const registerModal = document.getElementById('register-modal');
            const userBtn = document.getElementById('user-btn');
            const closeLogin = document.getElementById('close-login');
            const closeRegister = document.getElementById('close-register');
            const showRegister = document.getElementById('show-register');
            const showLogin = document.getElementById('show-login');

            // æ˜¾ç¤ºç™»å½•æ¨¡æ€æ¡†
            userBtn.addEventListener('click', function() {
                if (!StorageManager.isLoggedIn()) {
                    loginModal.style.display = 'block';
                }
            });

            // å…³é—­æ¨¡æ€æ¡†
            closeLogin.addEventListener('click', () => loginModal.style.display = 'none');
            closeRegister.addEventListener('click', () => registerModal.style.display = 'none');

            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
            window.addEventListener('click', function(event) {
                if (event.target === loginModal) {
                    loginModal.style.display = 'none';
                }
                if (event.target === registerModal) {
                    registerModal.style.display = 'none';
                }
            });

            // åˆ‡æ¢ç™»å½•æ³¨å†Œæ¨¡æ€æ¡†
            showRegister.addEventListener('click', function(e) {
                e.preventDefault();
                loginModal.style.display = 'none';
                registerModal.style.display = 'block';
            });

            showLogin.addEventListener('click', function(e) {
                e.preventDefault();
                registerModal.style.display = 'none';
                loginModal.style.display = 'block';
            });

            // ç™»å½•è¡¨å•æäº¤
            document.getElementById('login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                
                App.login(email, password);
            });

            // æ³¨å†Œè¡¨å•æäº¤
            document.getElementById('register-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('register-username').value;
                const email = document.getElementById('register-email').value;
                const password = document.getElementById('register-password').value;
                const confirmPassword = document.getElementById('register-confirm-password').value;
                
                if (password !== confirmPassword) {
                    alert('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´');
                    return;
                }
                
                App.register(username, email, password);
            });

            // é€€å‡ºç™»å½•
            document.getElementById('logout-btn').addEventListener('click', function(e) {
                e.preventDefault();
                App.logout();
            });

            // åˆ†ç±»å¡ç‰‡ç‚¹å‡»
            document.addEventListener('click', function(e) {
                const categoryCard = e.target.closest('.category-card');
                if (categoryCard) {
                    const categoryId = categoryCard.dataset.category;
                    window.location.href = `category.html?category=${categoryId}`;
                }
            });

            // å•†å“å¡ç‰‡ç‚¹å‡»
            document.addEventListener('click', function(e) {
                const productCard = e.target.closest('.product-card');
                if (productCard && !e.target.closest('.product-actions')) {
                    const productId = productCard.dataset.productId;
                    window.location.href = `product.html?id=${productId}`;
                }
            });
        }
    </script>
</body>
</html> 
