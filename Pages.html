<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MenFashion Store - 男士服装电商</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/pages.css">
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h1>MenFashion</h1>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link active">首页</a>
                <a href="category.html" class="nav-link">商品分类</a>
                <a href="category.html?category=1" class="nav-link">T恤</a>
                <a href="category.html?category=2" class="nav-link">衬衫</a>
                <a href="category.html?category=3" class="nav-link">裤子</a>
                <a href="category.html?category=4" class="nav-link">外套</a>
                <a href="category.html?category=5" class="nav-link">鞋子</a>
            </div>
            <div class="nav-actions">
                <a href="favorites.html" class="nav-icon" id="favorites-icon">
                    <span class="icon">❤️</span>
                    <span class="badge" id="favorites-count">0</span>
                </a>
                <a href="cart.html" class="nav-icon" id="cart-icon">
                    <span class="icon">🛒</span>
                    <span class="badge" id="cart-count">0</span>
                </a>
                <div class="user-menu" id="user-menu">
                    <button class="user-btn" id="user-btn">登录</button>
                    <div class="dropdown-menu" id="dropdown-menu">
                        <a href="profile.html">个人中心</a>
                        <a href="history.html">浏览历史</a>
                        <a href="#" id="logout-btn">退出登录</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主要内容 -->
    <main class="main-content">
        <!-- 轮播图 -->
        <section class="hero-section">
            <div class="carousel" id="carousel">
                <div class="carousel-container">
                    <!-- 轮播图内容将通过JavaScript动态生成 -->
                </div>
                <button class="carousel-btn prev" id="prev-btn">‹</button>
                <button class="carousel-btn next" id="next-btn">›</button>
                <div class="carousel-dots" id="carousel-dots">
                    <!-- 轮播图指示器将通过JavaScript动态生成 -->
                </div>
            </div>
        </section>

        <!-- 商品分类 -->
        <section class="categories-section">
            <div class="container">
                <h2 class="section-title">商品分类</h2>
                <div class="categories-grid" id="categories-grid">
                    <!-- 分类卡片将通过JavaScript动态生成 -->
                </div>
            </div>
        </section>

        <!-- 热门商品 -->
        <section class="products-section">
            <div class="container">
                <h2 class="section-title">热门商品</h2>
                <div class="products-grid" id="hot-products">
                    <!-- 商品卡片将通过JavaScript动态生成 -->
                </div>
            </div>
        </section>

        <!-- 新品上市 -->
        <section class="products-section">
            <div class="container">
                <h2 class="section-title">新品上市</h2>
                <div class="products-grid" id="new-products">
                    <!-- 商品卡片将通过JavaScript动态生成 -->
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>关于我们</h3>
                    <p>MenFashion Store致力于为男士提供优质的服装选择，让每一位顾客都能找到适合自己的风格。</p>
                </div>
                <div class="footer-section">
                    <h3>客户服务</h3>
                    <ul>
                        <li><a href="#">购物指南</a></li>
                        <li><a href="#">配送方式</a></li>
                        <li><a href="#">退换货政策</a></li>
                        <li><a href="#">联系客服</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>关注我们</h3>
                    <div class="social-links">
                        <a href="#" class="social-link">微信</a>
                        <a href="#" class="social-link">微博</a>
                        <a href="#" class="social-link">抖音</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 MenFashion Store. 保留所有权利。</p>
            </div>
        </div>
    </footer>

    <!-- 登录模态框 -->
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <span class="close" id="close-login">&times;</span>
            <h2>用户登录</h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email">邮箱</label>
                    <input type="email" id="login-email" required>
                </div>
                <div class="form-group">
                    <label for="login-password">密码</label>
                    <input type="password" id="login-password" required>
                </div>
                <button type="submit" class="btn btn-primary">登录</button>
                <p class="form-footer">
                    还没有账号？<a href="#" id="show-register">立即注册</a>
                </p>
            </form>
        </div>
    </div>

    <!-- 注册模态框 -->
    <div class="modal" id="register-modal">
        <div class="modal-content">
            <span class="close" id="close-register">&times;</span>
            <h2>用户注册</h2>
            <form id="register-form">
                <div class="form-group">
                    <label for="register-username">用户名</label>
                    <input type="text" id="register-username" required>
                </div>
                <div class="form-group">
                    <label for="register-email">邮箱</label>
                    <input type="email" id="register-email" required>
                </div>
                <div class="form-group">
                    <label for="register-password">密码</label>
                    <input type="password" id="register-password" required>
                </div>
                <div class="form-group">
                    <label for="register-confirm-password">确认密码</label>
                    <input type="password" id="register-confirm-password" required>
                </div>
                <button type="submit" class="btn btn-primary">注册</button>
                <p class="form-footer">
                    已有账号？<a href="#" id="show-login">立即登录</a>
                </p>
            </form>
        </div>
    </div>

    <!-- 加载JavaScript文件 -->
    <script src="js/data.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/app.js"></script>
    <script>
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化应用
            App.init();
            
            // 绑定事件
            bindEvents();
        });

        // 绑定页面事件
        function bindEvents() {
            // 登录注册模态框事件
            const loginModal = document.getElementById('login-modal');
            const registerModal = document.getElementById('register-modal');
            const userBtn = document.getElementById('user-btn');
            const closeLogin = document.getElementById('close-login');
            const closeRegister = document.getElementById('close-register');
            const showRegister = document.getElementById('show-register');
            const showLogin = document.getElementById('show-login');

            // 显示登录模态框
            userBtn.addEventListener('click', function() {
                if (!StorageManager.isLoggedIn()) {
                    loginModal.style.display = 'block';
                }
            });

            // 关闭模态框
            closeLogin.addEventListener('click', () => loginModal.style.display = 'none');
            closeRegister.addEventListener('click', () => registerModal.style.display = 'none');

            // 点击模态框外部关闭
            window.addEventListener('click', function(event) {
                if (event.target === loginModal) {
                    loginModal.style.display = 'none';
                }
                if (event.target === registerModal) {
                    registerModal.style.display = 'none';
                }
            });

            // 切换登录注册模态框
            showRegister.addEventListener('click', function(e) {
                e.preventDefault();
                loginModal.style.display = 'none';
                registerModal.style.display = 'block';
            });

            showLogin.addEventListener('click', function(e) {
                e.preventDefault();
                registerModal.style.display = 'none';
                loginModal.style.display = 'block';
            });

            // 登录表单提交
            document.getElementById('login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                
                App.login(email, password);
            });

            // 注册表单提交
            document.getElementById('register-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('register-username').value;
                const email = document.getElementById('register-email').value;
                const password = document.getElementById('register-password').value;
                const confirmPassword = document.getElementById('register-confirm-password').value;
                
                if (password !== confirmPassword) {
                    alert('两次输入的密码不一致');
                    return;
                }
                
                App.register(username, email, password);
            });

            // 退出登录
            document.getElementById('logout-btn').addEventListener('click', function(e) {
                e.preventDefault();
                App.logout();
            });

            // 分类卡片点击
            document.addEventListener('click', function(e) {
                const categoryCard = e.target.closest('.category-card');
                if (categoryCard) {
                    const categoryId = categoryCard.dataset.category;
                    window.location.href = `category.html?category=${categoryId}`;
                }
            });

            // 商品卡片点击
            document.addEventListener('click', function(e) {
                const productCard = e.target.closest('.product-card');
                if (productCard && !e.target.closest('.product-actions')) {
                    const productId = productCard.dataset.productId;
                    window.location.href = `product.html?id=${productId}`;
                }
            });
        }
    </script>
</body>
</html> 
